
import json

import requests
import discord
from discord.ext import commands 
from discord import DMChannel 
 

import os 

os.chdir("C:\\Users\\matth\\OneDrive\\Documents")

bot = commands.Bot(command_prefix= "!")


def write_json(data, filename="Guilds.json"): 
    with open (filename, "w") as f: 
        json.dump(data, f, indent=4)


@bot.command() 
async def signup(ctx, guild_name): 

    with open("Guilds.json") as f: 
        data = json.loads(f)

    if guild_name in data: 
        print("yes")

    else: 

             with open ("Guilds.json") as y: 
                data = json.load(y)
                temp = data["Users"] 
                myRecord = {
                        "name":guild_name
                    }   
                temp.append(myRecord)  
        
                write_json(data)
